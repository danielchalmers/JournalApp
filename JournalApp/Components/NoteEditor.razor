@namespace JournalApp
@using System.ComponentModel.DataAnnotations
@using System.Text.Json

<Modal Title="Edit Note"
	   Visible="@Visible"
	   OnOk="@OnOk"
	   OnCancel="@OnCancel">
	<Form Model="@Model"
		  OnFinish="OnFinish"
		  @ref="@_form">
		<FormItem Label="Today's note">
			<InputTextArea @bind-Value="@context.Text" />
		</FormItem>
	</Form>
</Modal>

@code {
	Form<Note> _form;

	[Parameter]
	public bool Visible { get; set; }

	[Parameter]
	public Note Model { get; set; }

	void OnOk(MouseEventArgs e)
	{
		_form.Submit();
	}

	void OnCancel(MouseEventArgs e)
	{
		Visible = false;
	}

	void OnFinish(EditContext editContext)
	{
		Visible = false;
	}
}