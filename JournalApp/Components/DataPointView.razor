@namespace JournalApp
@inject IDialogService DialogService

@if (DataPoint.DataType.HasFlag(DataType.Sleep))
{
	<div class="d-flex align-center flex-grow-1 gap-2">
		<MudText>@((DataPoint.SleepHours ?? 0).ToString("00.0"))</MudText>
		<MudSlider @bind-Value="DataPoint.SleepHours" Variant="Variant.Filled" Min="0" Max="24" Step="0.5m" />
	</div>
}
@if (DataPoint.DataType.HasFlag(DataType.Scale))
{
	<MudRating @bind-SelectedValue="DataPoint.ScaleIndex" Size="Size.Large" />
}
@if (DataPoint.DataType.HasFlag(DataType.Bool))
{
	<MudCheckBox @bind-Checked="DataPoint.Bool" TriState="true" Color="Color.Primary" />
}
@if (DataPoint.DataType.HasFlag(DataType.Number))
{
	<MudNumericField @bind-Value="DataPoint.Number" Margin="Margin.None" />
}
@if (DataPoint.DataType.HasFlag(DataType.Text))
{
	<div class="d-flex flex-column flex-grow-1 gap-2">
		<MudTextField @bind-Value="DataPoint.Text" Lines="4" Placeholder="What's on your mind?" Margin="Margin.None" />

		<MudLink OnClick="EditTextInDialog">Edit...</MudLink>
	</div>
}

@code {
	[Parameter]
	public DataPoint DataPoint { get; set; }

	async Task EditTextInDialog()
	{
		var parameters = new DialogParameters { { nameof(EditTextDialog.DataPoint), DataPoint } };

		var result = await DialogService.Show<EditTextDialog>("Edit text", parameters).Result;
	}
}