@namespace JournalApp

<div class="switcher">
	<MudIconButton Icon="@Icons.Material.Filled.ArrowBackIos" Title="Previous year" OnClick="PreviousYear" />

	<div class="switcher-header">
		<MudButton OnClick="OnHeaderClicked">
			<MudText Typo="Typo.h5">@SelectedYear</MudText>
		</MudButton>
	</div>

	<MudIconButton Icon="@Icons.Material.Filled.ArrowForwardIos" Title="Next year" OnClick="NextYear" Disabled="@(SelectedYear >= DateTime.Now.Year)" />
</div>

@code {
	int _selectedYear;

	[Parameter]
	public int SelectedYear
	{
		get => _selectedYear;
		set
		{
			if (_selectedYear == value)
				return;

			_selectedYear = value;
			SelectedYearChanged.InvokeAsync(value);
		}
	}

	[Parameter]
	public EventCallback<int> SelectedYearChanged { get; set; }

	[Parameter]
	public EventCallback HeaderClicked { get; set; }

	void OnHeaderClicked()
	{
		SelectedYear = DateTime.Now.Year;
		HeaderClicked.InvokeAsync();
	}

	public void NextYear()
	{
		SelectedYear++;
		StateHasChanged();
	}

	public void PreviousYear()
	{
		SelectedYear--;
		StateHasChanged();
	}
}
