@namespace JournalApp
@inject IDialogService DialogService

<MudDialog>
	<DialogContent>
		<MudTextField @bind-Value="Name" />

		<MudSelect Label="Type" @bind-Value="SelectedType">
			@foreach (var type in Enum.GetValues<DataType>())
			{
				<MudSelectItem Value="type">@type</MudSelectItem>
			}
		</MudSelect>
	</DialogContent>

	<DialogActions>
		<MudButton OnClick="Cancel">Cancel</MudButton>

		<MudButton Color="Color.Primary" OnClick="Submit">Add</MudButton>
	</DialogActions>
</MudDialog>

@code {
	[CascadingParameter] MudDialogInstance MudDialog { get; set; }

	public string Name { get; set; } = "My data point";

	public DataType SelectedType { get; set; }

	public DataPointCategory Category { get; set; }

	void Cancel()
	{
		MudDialog.Close(DialogResult.Cancel());
	}

	void Submit()
	{
		Category = new()
			{
				Name = Name,
				Type = SelectedType,
			};

		MudDialog.Close(DialogResult.Ok(Category));
	}
}